---
title: 组件与模块
date: 2020-07-03 10:52:26
order: 3
categories: React
tags:
  - JavaScript框架
  - React
---


## 模块化

---

1. 为什么要模块化?

- 在平时书写代码的过程中，我们会将复杂的代码拆分成一个个合理的代码块，每一个代码块负责解决一个较小的问题，这每一个代码块就是整个实际的代码的一部分，这就是 `模块化的思维`。同理，模块就可理解为整体的一部分
- 能够知道的是，在全局中使用 `var` 和 `function` 声明的变量或函数变量会被加入到顶层对象中，甚至在 `非严格模式下` 默认声明的变量，也有可能被加入到顶层对象中。而全局对象中的变量在不被主动释放引用的前提下，是不会被垃圾回收机制回收的，在各种各样的 js 文件被引入后，整个代码的结构会变得很复杂，同时可能造成 `全局命名空间冲突`、`堆栈溢出`等问题

2. 如何模块化

- 在 `JS` 还没有为模块化提供语法支持之前，常用的模块化方式我们可以通过 `闭包` 来实现

```js
var a = (function () {
  var num1 = 20;
  var num2 = 10;
  return function (a, b) {
    return {
      a:a ? a : num1;,
      b:b ? b : num2;
    }
  };
})();
var b = a();
```

- 上述代码中，变量 `b` 被挂载到顶层对象中，可以通过 `b` 访问闭包中的值，我们对上述代码优化一下，就模拟出了一个模块

```js
(function () {
  var num1 = 20;
  var num2 = 10;
  function inner (a, b) {
    return {
      a:a ? a : num1;,
      b:b ? b : num2;
    }
  };
  window.inner = inner;
})();
```

```js
var a = (function () {
  var num1 = 20;
  var num2 = 10;
  function inner (a, b) {
    return {
      a:a ? a : num1;,
      b:b ? b : num2;
    }
  };
  return {
    inner: inner,
    num1: num1,
  };
})();
a.inner();
```

- `inner` 与 `num1` 分别在函数内部被定义，但是却能在外部使用，借用 `闭包` 的方式，我们可以将一些方法或变量封装成一个单独的工具，避免相同的代码编写多次

---

## 组件化

---

1. 组件化的实质

- 组件化其实就是模块化思路的一种延申，一个组件由许多不同的模块组成，一个 `html`、`css`、`js` 甚至是一张图片都可以是一个模块，通过对这些模块的复用，构成许多功能特异的组件

2. 前端组件化

- 一个页面可能会很复杂，但我们可以把它拆分成一个个小组件，这样我们的工作能更高效率的完成，这就是前端组件化
- 组件化的思维深入，对一个页面进行合理的 `组件划分`，让代码具备更高的可读性、可维护性、以及更高的性能

3. react 中的组件

- 在 _React_ 中，所有的 UI 都是通过组件去描述和组织的，可以认为 _React_ 中所有的元素都是组件
- 可以分为两类：_内置组件_，即映射到 HTML 的节点，如 _div_、_input_ 等；_自定义组件_，自定义的组件，使用时以大写字母开头
